<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Staff OT Hours Forecasting Tool - Coffee on Cue</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    
    #root {
      width: 100%;
      min-height: 100vh;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useRef } = React;

    // Shadcn-like components
    const Card = ({ children, className = '', style = {} }) => (
      <div className={`rounded-lg border bg-card text-card-foreground shadow-sm ${className}`} style={style}>
        {children}
      </div>
    );

    const CardHeader = ({ children, className = '', style = {} }) => (
      <div className={`flex flex-col space-y-1.5 p-6 ${className}`} style={style}>
        {children}
      </div>
    );

    const CardTitle = ({ children, className = '', style = {} }) => (
      <h3 className={`text-2xl font-semibold leading-none tracking-tight ${className}`} style={style}>
        {children}
      </h3>
    );

    const CardDescription = ({ children, className = '', style = {} }) => (
      <p className={`text-sm text-muted-foreground ${className}`} style={style}>
        {children}
      </p>
    );

    const CardContent = ({ children, className = '', style = {} }) => (
      <div className={`p-6 pt-0 ${className}`} style={style}>
        {children}
      </div>
    );

    const Button = ({ children, onClick, className = '', disabled = false, style = {} }) => (
      <button
        onClick={onClick}
        disabled={disabled}
        className={`inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 h-10 px-4 py-2 ${className}`}
        style={style}
      >
        {children}
      </button>
    );

    const Input = ({ type = 'text', className = '', style = {}, ...props }) => (
      <input
        type={type}
        className={`flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${className}`}
        style={style}
        {...props}
      />
    );

    const Label = ({ children, htmlFor, className = '', style = {} }) => (
      <label
        htmlFor={htmlFor}
        className={`text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ${className}`}
        style={style}
      >
        {children}
      </label>
    );

    const Alert = ({ children, className = '', style = {} }) => (
      <div
        className={`relative w-full rounded-lg border p-4 ${className}`}
        style={style}
      >
        {children}
      </div>
    );

    const AlertTitle = ({ children, className = '', style = {} }) => (
      <h5 className={`mb-1 font-medium leading-none tracking-tight ${className}`} style={style}>
        {children}
      </h5>
    );

    const AlertDescription = ({ children, className = '', style = {} }) => (
      <div className={`text-sm ${className}`} style={style}>
        {children}
      </div>
    );

    // Lucide-like icons
    const Upload = ({ className = '', style = {} }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} style={style}>
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
        <polyline points="17 8 12 3 7 8" />
        <line x1="12" x2="12" y1="3" y2="15" />
      </svg>
    );

    const AlertCircle = ({ className = '', style = {} }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} style={style}>
        <circle cx="12" cy="12" r="10" />
        <line x1="12" x2="12" y1="8" y2="12" />
        <line x1="12" x2="12.01" y1="16" y2="16" />
      </svg>
    );

    const Clock = ({ className = '', style = {} }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} style={style}>
        <circle cx="12" cy="12" r="10" />
        <polyline points="12 6 12 12 16 14" />
      </svg>
    );

    const Users = ({ className = '', style = {} }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} style={style}>
        <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" />
        <circle cx="9" cy="7" r="4" />
        <path d="M22 21v-2a4 4 0 0 0-3-3.87" />
        <path d="M16 3.13a4 4 0 0 1 0 7.75" />
      </svg>
    );

    const Info = ({ className = '', style = {} }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} style={style}>
        <circle cx="12" cy="12" r="10" />
        <path d="M12 16v-4" />
        <path d="M12 8h.01" />
      </svg>
    );

    const Coffee = ({ className = '', style = {} }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} style={style}>
        <path d="M17 8h1a4 4 0 1 1 0 8h-1" />
        <path d="M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z" />
        <line x1="6" x2="6" y1="2" y2="4" />
        <line x1="10" x2="10" y1="2" y2="4" />
        <line x1="14" x2="14" y1="2" y2="4" />
      </svg>
    );

    function App() {
      const [staffHours, setStaffHours] = useState([]);
      const [overtimeStaff, setOvertimeStaff] = useState([]);
      const [staffByState, setStaffByState] = useState({});
      const [overtimeByState, setOvertimeByState] = useState({});
      const [states, setStates] = useState([]);
      const [fileName, setFileName] = useState('');
      const [error, setError] = useState('');
      const [summary, setSummary] = useState(null);
      const [metrics, setMetrics] = useState({ totalHours: 0, bumpInHours: 0, serviceHours: 0, bumpOutHours: 0 });
      const fileInputRef = useRef(null);

      const parseTime = (timeStr) => {
        if (!timeStr || timeStr.trim() === '') return 0;
        const parts = timeStr.trim().split(':');
        if (parts.length !== 2) return 0;
        const hours = parseInt(parts[0]) || 0;
        const minutes = parseInt(parts[1]) || 0;
        return hours + minutes / 60;
      };

      const formatHours = (hours) => {
        const wholeHours = Math.floor(hours);
        const minutes = Math.round((hours - wholeHours) * 60);
        return `${wholeHours}h ${minutes}m`;
      };

      const processCSV = (text) => {
        try {
          setError('');
          const lines = text.split('\n').filter(line => line.trim());
          
          if (lines.length < 2) {
            setError('The CSV file appears to be empty or invalid.');
            return;
          }

          const headers = lines[0].split(',').map(h => h.trim().replace(/^"|"$/g, ''));
          
          const taskTitleIndex = headers.findIndex(h => h.toLowerCase() === 'task title');
          const durationIndex = headers.findIndex(h => h.toLowerCase() === 'duration');
          const assigneesIndex = headers.findIndex(h => h.toLowerCase() === 'assignees');
          const groupIndex = headers.findIndex(h => h.toLowerCase() === 'group');

          if (taskTitleIndex === -1 || durationIndex === -1 || assigneesIndex === -1 || groupIndex === -1) {
            setError('CSV must contain "Task Title", "Duration", "Assignees", and "Group" columns.');
            return;
          }

          const hoursMap = {};
          const stateMap = {};
          let processedRows = 0;
          let skippedRows = 0;
          let bumpInHours = 0;
          let bumpOutHours = 0;
          let serviceHours = 0;
          let totalHours = 0;

          for (let i = 1; i < lines.length; i++) {
            const line = lines[i];
            if (!line.trim()) {
              skippedRows++;
              continue;
            }

            const values = [];
            let currentValue = '';
            let insideQuotes = false;

            for (let char of line) {
              if (char === '"') {
                insideQuotes = !insideQuotes;
              } else if (char === ',' && !insideQuotes) {
                values.push(currentValue.trim().replace(/^"|"$/g, ''));
                currentValue = '';
              } else {
                currentValue += char;
              }
            }
            values.push(currentValue.trim().replace(/^"|"$/g, ''));

            if (values.length < Math.max(taskTitleIndex, durationIndex, assigneesIndex, groupIndex) + 1) {
              skippedRows++;
              continue;
            }

            const taskTitle = values[taskTitleIndex] || '';
            const duration = values[durationIndex] || '';
            const assignees = values[assigneesIndex] || '';
            const group = values[groupIndex] || 'Unknown';

            // Check if task is a BUMP IN, BUMP OUT, or SERVICE
            const isBumpIn = taskTitle.toUpperCase().startsWith('[BUMP IN]');
            const isBumpOut = taskTitle.toUpperCase().startsWith('[BUMP OUT]');
            const isService = taskTitle.toUpperCase().startsWith('[SERVICE]');

            if (!assignees.trim()) {
              skippedRows++;
              continue;
            }

            const hours = parseTime(duration);
            
            const staffNames = assignees.split(',').map(name => name.trim()).filter(name => name);

            if (staffNames.length === 0) {
              skippedRows++;
              continue;
            }

            staffNames.forEach(name => {
              const key = `${name}|||${group}`;
              if (!hoursMap[key]) {
                hoursMap[key] = 0;
                stateMap[name] = group;
              }
              
              // Add regular task hours
              hoursMap[key] += hours;
              totalHours += hours;
              
              // Add 1.5 hours if this is a BUMP IN or BUMP OUT task
              if (isBumpIn) {
                hoursMap[key] += 1.5;
                bumpInHours += 1.5;
                totalHours += 1.5;
              }
              if (isBumpOut) {
                hoursMap[key] += 1.5;
                bumpOutHours += 1.5;
                totalHours += 1.5;
              }
              
              // Track service hours
              if (isService) {
                serviceHours += hours;
              }
            });

            processedRows++;
          }

          // Create staff array with state information
          const staffArray = Object.entries(hoursMap).map(([key, hours]) => {
            const [name, state] = key.split('|||');
            return {
              name,
              state,
              totalHours: hours
            };
          });

          staffArray.sort((a, b) => b.totalHours - a.totalHours);

          // Group by state
          const uniqueStates = [...new Set(staffArray.map(s => s.state))].sort();
          const byState = {};
          const overtimeByState = {};
          
          uniqueStates.forEach(state => {
            byState[state] = staffArray.filter(s => s.state === state);
            overtimeByState[state] = staffArray.filter(s => s.state === state && s.totalHours > 38);
          });

          setStaffHours(staffArray);
          setStaffByState(byState);
          setOvertimeStaff(staffArray.filter(staff => staff.totalHours > 38));
          setOvertimeByState(overtimeByState);
          setStates(uniqueStates);
          setSummary({
            totalRows: lines.length - 1,
            processedRows,
            skippedRows
          });
          
          setMetrics({
            totalHours,
            bumpInHours,
            serviceHours,
            bumpOutHours
          });

        } catch (err) {
          setError(`Error processing CSV: ${err.message}`);
          console.error(err);
        }
      };

      const handleFileUpload = (event) => {
        const file = event.target.files?.[0];
        if (!file) return;

        if (!file.name.endsWith('.csv')) {
          setError('Please upload a CSV file.');
          return;
        }

        setFileName(file.name);
        const reader = new FileReader();
        
        reader.onload = (e) => {
          const text = e.target?.result;
          processCSV(text);
        };

        reader.onerror = () => {
          setError('Error reading file. Please try again.');
        };

        reader.readAsText(file);
      };

      const handleReset = () => {
        setStaffHours([]);
        setOvertimeStaff([]);
        setStaffByState({});
        setOvertimeByState({});
        setStates([]);
        setFileName('');
        setError('');
        setSummary(null);
        setMetrics({ totalHours: 0, bumpInHours: 0, serviceHours: 0, bumpOutHours: 0 });
        if (fileInputRef.current) {
          fileInputRef.current.value = '';
        }
      };

      return (
        <div style={{ 
          minHeight: '100vh', 
          backgroundColor: '#FDF7EF',
          padding: '2rem'
        }}>
          <div style={{ maxWidth: '1200px', margin: '0 auto' }}>
            {/* Header with Logo */}
            <div className="mb-8 text-center">
              <div className="inline-flex items-center gap-3 mb-4">
                <Coffee className="h-12 w-12" style={{ color: '#C35E38' }} />
                <h1 className="text-4xl font-bold" style={{ color: '#131917' }}>
                  Staff OT Hours Forecasting Tool
                </h1>
              </div>
              <p className="text-lg font-semibold" style={{ color: '#C35E38' }}>
                COFFEE ON CUE
              </p>
              <p className="mt-2 text-sm" style={{ color: '#131917', opacity: 0.7 }}>
                Upload your tasks CSV to calculate staff hours and identify overtime
              </p>
            </div>

            {/* Upload Section */}
            <Card 
              className="mb-6 border-2 hover:shadow-lg transition-shadow" 
              style={{ 
                borderColor: '#F4DDD2',
                backgroundColor: 'white'
              }}
            >
              <CardHeader style={{ backgroundColor: '#F4DDD2' }}>
                <CardTitle className="flex items-center gap-2" style={{ color: '#131917' }}>
                  <Upload className="h-5 w-5" style={{ color: '#C35E38' }} />
                  Upload CSV File
                </CardTitle>
                <CardDescription style={{ color: '#131917', opacity: 0.7 }}>
                  Select a CSV file containing task assignments and durations
                </CardDescription>
              </CardHeader>
              <CardContent className="space-y-4" style={{ paddingTop: '1.5rem' }}>
                <div className="space-y-2">
                  <Label htmlFor="csv-upload" style={{ color: '#131917' }}>
                    Choose File
                  </Label>
                  <div className="relative">
                    <Input
                      id="csv-upload"
                      type="file"
                      accept=".csv"
                      onChange={handleFileUpload}
                      ref={fileInputRef}
                      className="hidden"
                    />
                    <label 
                      htmlFor="csv-upload"
                      className="flex items-center justify-center gap-2 px-4 py-3 rounded-lg cursor-pointer transition-all hover:opacity-90 font-medium"
                      style={{ 
                        backgroundColor: '#C35E38',
                        color: 'white',
                        border: '2px solid #C35E38'
                      }}
                    >
                      <Upload className="h-5 w-5" />
                      Choose CSV File
                    </label>
                  </div>
                  {fileName && (
                    <p className="text-sm mt-2" style={{ color: '#C35E38' }}>
                      ✓ Selected: {fileName}
                    </p>
                  )}
                </div>

                {/* Info Box */}
                <Alert style={{ 
                  backgroundColor: '#E9C4B4', 
                  borderColor: '#C35E38',
                  borderLeft: `4px solid #C35E38`
                }}>
                  <Info className="h-4 w-4 inline mr-2" style={{ color: '#C35E38' }} />
                  <AlertTitle style={{ color: '#131917', display: 'inline' }}>CSV Requirements</AlertTitle>
                  <AlertDescription style={{ color: '#131917', marginTop: '0.5rem' }}>
                    Your CSV must include columns: <strong>Task Title</strong>, <strong>Duration</strong> (HH:MM format), <strong>Assignees</strong>, and <strong>Group</strong> (state)
                    <br />
                    <strong className="mt-2 block" style={{ color: '#C35E38' }}>Special Rules:</strong>
                    <ul className="list-disc ml-5 mt-1">
                      <li>Tasks starting with <strong>[BUMP IN]</strong> or <strong>[BUMP OUT]</strong> automatically add 1.5 hours per assignee</li>
                      <li>This accounts for driving and kit packing/restocking</li>
                      <li>Tasks starting with <strong>[SERVICE]</strong> are tracked separately as service hours</li>
                    </ul>
                  </AlertDescription>
                </Alert>

                {staffHours.length > 0 && (
                  <Button
                    onClick={handleReset}
                    style={{ 
                      backgroundColor: '#A2B7BB',
                      color: 'white',
                      width: '100%'
                    }}
                    className="hover:opacity-90"
                  >
                    Reset and Upload New File
                  </Button>
                )}
              </CardContent>
            </Card>

            {/* Error Alert */}
            {error && (
              <Alert 
                className="mb-6" 
                style={{ 
                  backgroundColor: '#fee', 
                  borderColor: '#823243',
                  borderLeft: `4px solid #823243`
                }}
              >
                <AlertCircle className="h-4 w-4 inline mr-2" style={{ color: '#823243' }} />
                <AlertTitle style={{ color: '#823243', display: 'inline' }}>Error</AlertTitle>
                <AlertDescription style={{ color: '#823243', marginTop: '0.5rem' }}>
                  {error}
                </AlertDescription>
              </Alert>
            )}

            {/* Processing Summary */}
            {summary && (
              <Card 
                className="mb-6 border-2" 
                style={{ 
                  backgroundColor: '#F4DDD2',
                  borderColor: '#C35E38'
                }}
              >
                <CardContent style={{ paddingTop: '1.5rem' }}>
                  <div className="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                    <div>
                      <p className="text-2xl font-bold" style={{ color: '#131917' }}>
                        {formatHours(metrics.totalHours)}
                      </p>
                      <p className="text-sm" style={{ color: '#131917', opacity: 0.7 }}>
                        Total Hours
                      </p>
                    </div>
                    <div>
                      <p className="text-2xl font-bold" style={{ color: '#C35E38' }}>
                        {formatHours(metrics.bumpInHours)}
                      </p>
                      <p className="text-sm" style={{ color: '#131917', opacity: 0.7 }}>
                        Bump-In Hours
                      </p>
                    </div>
                    <div>
                      <p className="text-2xl font-bold" style={{ color: '#C35E38' }}>
                        {formatHours(metrics.serviceHours)}
                      </p>
                      <p className="text-sm" style={{ color: '#131917', opacity: 0.7 }}>
                        Service Hours
                      </p>
                    </div>
                    <div>
                      <p className="text-2xl font-bold" style={{ color: '#C35E38' }}>
                        {formatHours(metrics.bumpOutHours)}
                      </p>
                      <p className="text-sm" style={{ color: '#131917', opacity: 0.7 }}>
                        Bump-Out Hours
                      </p>
                    </div>
                  </div>
                  <div className="mt-4 pt-4 text-center text-sm" style={{ borderTop: '1px solid #C35E38', color: '#131917' }}>
                    <strong>{summary.processedRows}</strong> tasks processed • <strong>{summary.skippedRows}</strong> rows skipped
                  </div>
                </CardContent>
              </Card>
            )}

            {/* Results Section */}
            {staffHours.length > 0 && (
              <>
                {/* All Staff Hours - Segmented by State */}
                <div className="mb-6">
                  <h2 className="text-2xl font-bold mb-4 flex items-center gap-2" style={{ color: '#131917' }}>
                    <Clock className="h-6 w-6" style={{ color: '#C35E38' }} />
                    Staff Hours Summary by State
                  </h2>
                  
                  {states.length <= 2 ? (
                    // Two columns for Victoria and NSW
                    <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                      {states.map((state) => (
                        <Card 
                          key={state}
                          className="border-2" 
                          style={{ 
                            borderColor: '#F4DDD2',
                            backgroundColor: 'white'
                          }}
                        >
                          <CardHeader style={{ backgroundColor: '#F4DDD2' }}>
                            <CardTitle className="flex items-center gap-2" style={{ color: '#131917' }}>
                              <Users className="h-5 w-5" style={{ color: '#C35E38' }} />
                              {state}
                            </CardTitle>
                            <CardDescription style={{ color: '#131917', opacity: 0.7 }}>
                              {staffByState[state].length} staff member{staffByState[state].length !== 1 ? 's' : ''}
                            </CardDescription>
                          </CardHeader>
                          <CardContent>
                            <div className="space-y-3">
                              {staffByState[state].map((staff, index) => (
                                <div
                                  key={index}
                                  className="flex justify-between items-center p-4 rounded-lg transition-all hover:shadow-md"
                                  style={{
                                    backgroundColor: staff.totalHours > 38 ? '#ffe0e0' : 'white',
                                    border: `2px solid ${staff.totalHours > 38 ? '#823243' : '#F4DDD2'}`
                                  }}
                                >
                                  <span 
                                    className="font-medium"
                                    style={{ color: staff.totalHours > 38 ? '#823243' : '#131917' }}
                                  >
                                    {staff.name}
                                  </span>
                                  <div className="text-right">
                                    <div 
                                      className="font-bold text-lg"
                                      style={{ color: staff.totalHours > 38 ? '#823243' : '#131917' }}
                                    >
                                      {formatHours(staff.totalHours)}
                                    </div>
                                    {staff.totalHours > 38 && (
                                      <div className="text-sm" style={{ color: '#823243' }}>
                                        +{formatHours(staff.totalHours - 38)} OT
                                      </div>
                                    )}
                                  </div>
                                </div>
                              ))}
                            </div>
                          </CardContent>
                        </Card>
                      ))}
                    </div>
                  ) : (
                    // Stacked layout for 3+ states
                    <div className="space-y-6">
                      {states.map((state) => (
                        <Card 
                          key={state}
                          className="border-2" 
                          style={{ 
                            borderColor: '#F4DDD2',
                            backgroundColor: 'white'
                          }}
                        >
                          <CardHeader style={{ backgroundColor: '#F4DDD2' }}>
                            <CardTitle className="flex items-center gap-2" style={{ color: '#131917' }}>
                              <Users className="h-5 w-5" style={{ color: '#C35E38' }} />
                              {state}
                            </CardTitle>
                            <CardDescription style={{ color: '#131917', opacity: 0.7 }}>
                              {staffByState[state].length} staff member{staffByState[state].length !== 1 ? 's' : ''}
                            </CardDescription>
                          </CardHeader>
                          <CardContent>
                            <div className="space-y-3">
                              {staffByState[state].map((staff, index) => (
                                <div
                                  key={index}
                                  className="flex justify-between items-center p-4 rounded-lg transition-all hover:shadow-md"
                                  style={{
                                    backgroundColor: staff.totalHours > 38 ? '#ffe0e0' : 'white',
                                    border: `2px solid ${staff.totalHours > 38 ? '#823243' : '#F4DDD2'}`
                                  }}
                                >
                                  <span 
                                    className="font-medium"
                                    style={{ color: staff.totalHours > 38 ? '#823243' : '#131917' }}
                                  >
                                    {staff.name}
                                  </span>
                                  <div className="text-right">
                                    <div 
                                      className="font-bold text-lg"
                                      style={{ color: staff.totalHours > 38 ? '#823243' : '#131917' }}
                                    >
                                      {formatHours(staff.totalHours)}
                                    </div>
                                    {staff.totalHours > 38 && (
                                      <div className="text-sm" style={{ color: '#823243' }}>
                                        +{formatHours(staff.totalHours - 38)} OT
                                      </div>
                                    )}
                                  </div>
                                </div>
                              ))}
                            </div>
                          </CardContent>
                        </Card>
                      ))}
                    </div>
                  )}
                </div>

                {/* Overtime Alert - Segmented by State */}
                {overtimeStaff.length > 0 && (
                  <div>
                    <h2 className="text-2xl font-bold mb-4 flex items-center gap-2" style={{ color: '#823243' }}>
                      <AlertCircle className="h-6 w-6" />
                      Overtime Alert ({overtimeStaff.length} staff)
                    </h2>
                    
                    {states.length <= 2 ? (
                      // Two columns for Victoria and NSW
                      <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        {states.map((state) => {
                          const stateOvertimeStaff = overtimeByState[state] || [];
                          if (stateOvertimeStaff.length === 0) return null;
                          
                          return (
                            <Card 
                              key={state}
                              className="border-2" 
                              style={{ 
                                backgroundColor: '#ffe0e0',
                                borderColor: '#823243'
                              }}
                            >
                              <CardHeader style={{ 
                                backgroundColor: '#823243',
                                color: 'white'
                              }}>
                                <CardTitle className="flex items-center gap-2">
                                  <AlertCircle className="h-5 w-5" />
                                  {state} ({stateOvertimeStaff.length})
                                </CardTitle>
                                <CardDescription style={{ color: 'rgba(255,255,255,0.9)' }}>
                                  Staff exceeding 38 hours
                                </CardDescription>
                              </CardHeader>
                              <CardContent style={{ paddingTop: '1.5rem' }}>
                                <div className="space-y-3">
                                  {stateOvertimeStaff.map((staff, index) => (
                                    <div
                                      key={index}
                                      className="flex justify-between items-center p-4 rounded-lg"
                                      style={{
                                        backgroundColor: 'white',
                                        border: '2px solid #823243'
                                      }}
                                    >
                                      <span className="font-medium" style={{ color: '#823243' }}>
                                        {staff.name}
                                      </span>
                                      <div className="text-right">
                                        <div className="font-bold text-lg" style={{ color: '#823243' }}>
                                          {formatHours(staff.totalHours)}
                                        </div>
                                        <div className="text-sm" style={{ color: '#823243', opacity: 0.8 }}>
                                          +{formatHours(staff.totalHours - 38)} OT
                                        </div>
                                      </div>
                                    </div>
                                  ))}
                                </div>
                              </CardContent>
                            </Card>
                          );
                        })}
                      </div>
                    ) : (
                      // Stacked layout for 3+ states
                      <div className="space-y-6">
                        {states.map((state) => {
                          const stateOvertimeStaff = overtimeByState[state] || [];
                          if (stateOvertimeStaff.length === 0) return null;
                          
                          return (
                            <Card 
                              key={state}
                              className="border-2" 
                              style={{ 
                                backgroundColor: '#ffe0e0',
                                borderColor: '#823243'
                              }}
                            >
                              <CardHeader style={{ 
                                backgroundColor: '#823243',
                                color: 'white'
                              }}>
                                <CardTitle className="flex items-center gap-2">
                                  <AlertCircle className="h-5 w-5" />
                                  {state} ({stateOvertimeStaff.length})
                                </CardTitle>
                                <CardDescription style={{ color: 'rgba(255,255,255,0.9)' }}>
                                  Staff exceeding 38 hours
                                </CardDescription>
                              </CardHeader>
                              <CardContent style={{ paddingTop: '1.5rem' }}>
                                <div className="space-y-3">
                                  {stateOvertimeStaff.map((staff, index) => (
                                    <div
                                      key={index}
                                      className="flex justify-between items-center p-4 rounded-lg"
                                      style={{
                                        backgroundColor: 'white',
                                        border: '2px solid #823243'
                                      }}
                                    >
                                      <span className="font-medium" style={{ color: '#823243' }}>
                                        {staff.name}
                                      </span>
                                      <div className="text-right">
                                        <div className="font-bold text-lg" style={{ color: '#823243' }}>
                                          {formatHours(staff.totalHours)}
                                        </div>
                                        <div className="text-sm" style={{ color: '#823243', opacity: 0.8 }}>
                                          +{formatHours(staff.totalHours - 38)} OT
                                        </div>
                                      </div>
                                    </div>
                                  ))}
                                </div>
                              </CardContent>
                            </Card>
                          );
                        })}
                      </div>
                    )}
                  </div>
                )}
              </>
            )}

            {/* Footer */}
            <div 
              className="mt-8 pt-4 text-center text-sm" 
              style={{ 
                color: '#131917', 
                opacity: 0.6,
                borderTop: '1px solid #F4DDD2'
              }}
            >
              <Coffee className="h-4 w-4 inline mr-2" style={{ color: '#C35E38' }} />
              Powered by Coffee on Cue © {new Date().getFullYear()}
            </div>
          </div>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
